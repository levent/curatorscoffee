/* ----------------------------------------------------------------------------------------
 
   BUTTONS

*/

.button {
  /* ----------------------------------------
     GLOBAL
  */
  
  cursor: pointer;
  display: inline-block;
  width: auto;
  font-weight: normal;

  &:hover {
    background-position: 0 -15px;
    color: $base;
    text-decoration: none;
  }

  // Focus state for keyboard and accessibility
  &:focus {
    outline: 1px dotted $gray;
  }

   // Transitions
  @include transition(.1s linear all);

  // Active and Disabled states
  &.active,
  &:active {
    color: $base;
    $shadow: inset -1px 1px 1px rgba(0,0,0,.12), inset 1px 1px 1px rgba(0,0,0,.12), 0 1px 2px rgba(0,0,0,.05);
    @include box-shadow($shadow);
  }
  
  
  // Medium (default size)

  @include rem ('font-size', 13);
  line-height: em(18);
  padding: em(5) em(10);
  @include border-radius(em(4));
  margin-bottom: em(10);
  
  
  // Gray (default skin)
  
  color: $base;
  text-shadow: 0 1px 1px rgba(255,255,255,.75);
  @include vertical-three-colors-gradient($white, $white, 25%, darken($white, 10%));
  border: 1px solid darken($grayLighter,5);
  border-bottom-color: darken($grayLighter,10);
  $shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
  @include box-shadow($shadow);
  &:visited { color: $base; }
  
  /* ----------------------------------------
  
     SIZES
     
  */
  
  /* ----------------------------------------
     LARGE
  */
  
  &.button-large {
    @include rem ('font-size', 16);
    line-height: em(18,16);
    padding: em(8,16) em(22,16) em(8,16);
    margin-bottom: em(18,16);
    width: auto;
    @include border-radius(em(6,16));
  }
  
  /* ----------------------------------------
     SMALL
  */
  
  &.button-small {
    @include rem ('font-size', 12);
    line-height: em(18,12);
    padding: em(1,12) .5em 0;
    margin-bottom: em(15,12);  
    width: auto;
  }   

  /* ----------------------------------------
  
     TYPES
     
  */
  
  /* ----------------------------------------
     LEVELED
  */
  
  &.button-leveled {
    background: transparent;
    border-color: $borderGray;
    color: $gray;
    $shadow: inset 0 1px 0 white, 0 1px 0 white;
    @include box-shadow($shadow);
    
    &:hover {
      color: darken($gray, 10);
      border-color: darken($grayLight, 5);
      $shadow: inset 0 1px 0 white, 0 1px 2px rgba(0,0,0,.05);
      @include box-shadow($shadow);      
    }
    
    &:active,
    &.active {
      color: lighten($base,15);
      background: lighten($grayLighter,6);
      $shadow: inset -1px 1px 1px rgba(0,0,0,.12), inset 1px 1px 1px rgba(0,0,0,.12), 0 1px 0 rgba(255,255,255,.75);
      @include box-shadow($shadow);
    }
  }
    
  .box &.button-leveled {
    border: none;    
    &:hover,
    &:active,
    &.active {
      background: transparent;
      color: $base;
      @include box-shadow(none);       
    }  
  }
  
  /* ----------------------------------------
     INSET
  */
    
  &.button-inset {  
    color: darken($gray, 15);
    background: lighten($grayLighter,7);
    border-color: $borderGray;
    $shadow: inset 0 2px 1px rgba(0,0,0,.12), 0 1px 0 rgba(255,255,255,.75);
    @include box-shadow($shadow);  
  
    &.icon-only:before { color: $base; }
    
    &:hover {
      background: lighten($grayLighter,4);
      color: $base;
      border-color: darken($grayLight, 5); 
    }
    
    &:active,
    &.active {
      background: lighten($grayLighter,1);
      $shadow: inset -2px 2px 4px rgba(0,0,0,.15), inset 2px 2px 4px rgba(0,0,0,.15), 0 1px 0 rgba(255,255,255,.75);
      @include box-shadow($shadow);         
    }
    
    &.icon:before { top: -.2em; }
  }
  

  /* ----------------------------------------
  
     STYLES
     
  */
  
  /* ----------------------------------------
     PRIMARY
  */
  
  &.button-primary {
    font-weight: bold;
    color: $white;
    @include gradientBar($primaryStart, $primaryEnd);
    &.icon:before { color: darken($primaryEnd, 20); text-shadow: 0 1px 0 $primaryStart; }
    
    &.button-leveled { @include leveledGradientBar ($primaryStart, $primary); }
    &.button-inset   { @include insetGradientBar   ($primary); }
    &:active { color: $white; }
  }
  
  /* ----------------------------------------
     SECONDARY
  */
  
  &.button-secondary {
    font-weight: bold;
    color: $white;
    @include gradientBar($secondaryStart, $secondaryEnd);
    &.icon:before { color: darken($secondaryEnd, 20); text-shadow: 0 1px 0 $secondaryStart; }
    
    &.button-leveled { @include leveledGradientBar ($secondaryStart, $secondary); }
    &.button-inset   { @include insetGradientBar   ($secondary); }
    &:active { color: $white; }
  }
  
  /* ----------------------------------------
     DANGER / ERROR
  */
  
  &.button-danger,
  &.button-danger:hover,
  &.button-error,
  &.button-error:hover,
  &.button-success,
  &.button-success:hover,
  &.button-info,
  &.button-info:hover {
    color: $white;
    font-weight: bold;
  }
  
  &.button-danger,
  &.button-error {
    @include gradientBar( lighten($red,10), $red );
    &.icon:before { color: darken($red, 20) !important; text-shadow: 0 1px 0 lighten($red,15);  }
    &.button-leveled { @include leveledGradientBar (lighten($errorText,15), $errorText); }
    &.button-inset { @include insetGradientBar (lighten($errorText, 5)); }
    &:active { color: $white; }
  }
  
  /* ----------------------------------------
     SUCCESS
  */
  
  &.button-success {
    @include gradientBar(lighten($successText,25), lighten($successText,10));
    &.icon:before { color: darken($successText, 15) !important; text-shadow: 0 1px 0 lighten($successText,25); }
    &.button-leveled { @include leveledGradientBar (lighten($successText,25), lighten($successText,10)); }
    &.button-inset { @include insetGradientBar (lighten($successText, 15)); }
    &:active { color: $white; }
  }
  
  /* ----------------------------------------
     INFO
  */
  
  &.button-info {
    @include gradientBar(darken($secondaryStart,10), darken($secondaryEnd,10));
    &.icon:before { color: darken($secondaryEnd, 30) !important; text-shadow: 0 1px 0 darken($secondaryStart,10); }
    &.button-leveled { @include leveledGradientBar (darken($secondaryStart,10), darken($secondaryEnd,10)); }
    &.button-inset { @include insetGradientBar (darken($blue, 5)); }
    &:active { color: $white; }
  }

  /* ----------------------------------------
     WITH ICON
  */
  
  &.icon {      
    padding-left: em(8);
    &.button-large { padding-left: 1em; }
    &.button-small:before,
    &.button-small .icon-fallback { top: -.23em; font-size: 1.5em; }
  }
  
  &.iconified {
    @include rem ('font-size', 24);
  }
  
  &.icon-only {
    padding-right: em(8);
    text-align: center;
    &.button-large { 
      padding-right: 1em;
      &:before { top: -.2em; }
    }
    &.button-small { padding-right: .75em; }
    
    &:before,
    .icon-fallback { 
      font-size: 1.75em; 
      color: $grayLight;
    }
    
    .box &.button-leveled.active,
    .box &.button-leveled:hover {
      &:before,
      .icon-fallback {
        color: $base;
      }
    }
  }
  

  /* ----------------------------------------
     IE ADJUSTMENTS
  */
  
  .ie9 &,
  .oldie & {
    &:hover,
    &:active,
    &.active {
      border-color: darken($grayLight, 10);
  
      &.button-primary { background-color: darken($primary, 10); border-color: darken($primary, 15); }
      &.button-secondary { background-color: darken($secondary, 10); border-color: darken($secondary, 15); }
      &.button-danger,
      &.button-error { background-color: darken(#c43c35, 10); border-color: darken(#c43c35, 15); }
      &.button-success { background-color: darken(#57a957, 10); border-color: darken(#57a957, 15); }
      &.button-info { background-color: darken(#339bb9, 10); border-color: darken(#339bb9, 15); }
    }
  }
  
  .ie9 & {
    &.icon {
      &.button-small:before {
        font-size: 60%;
      }
    }
  
    &.icon-only {
      &:before {
        font-size: 60%;
      }
      
      &.button-large:before {
        top: -.16em;
      }
    }
  }

  .oldie & {  
    &.icon-only {
      padding-right: em(2);
      &.button-large { padding-right: .6em; }
      &.button-small { padding-right: .25em; }
    }
  }
  
  .ie7 & {
    vertical-align: bottom;
    
    .icon-fallback {
      position: relative;
      top: -13px;
      height: 13px;
      line-height: 30px;
    }
    
    &.button-small .icon-fallback { top: -12px; }
    &.button-large .icon-fallback { top: -15px; line-height: 35px; }
  }
}

.ie7 button.button,
.ie7 input.button {
  padding: em(3) em(8);
  
  &.button-large { padding: em(5,16) em(18,16) em(5,16); }
  &.button-small { padding: 0 .3em 0; } 
}

:root .button {
  border-radius: 0 \0;
}

button.button,
input[type=submit].button {
  &::-moz-focus-inner {
    padding: 0;
    border: 0;
  }
}

.button {
  &.button-disabled {
    cursor: default;
    background-image: none;
    @include reset-filter();
    @include opacity(65);
    @include box-shadow(none);
    &:hover { background-position: 0 0; }
  }
  &[disabled] {
    cursor: default;
    background-image: none;
    @include reset-filter();
    @include opacity(65);
    @include box-shadow(none);
  }
}