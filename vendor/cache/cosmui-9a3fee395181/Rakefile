require "bundler/setup"

begin
  require 'jasmine'
  load 'jasmine/tasks/jasmine.rake'
rescue LoadError
  task :jasmine do
    abort "Jasmine is not available. In order to run jasmine, you must: (sudo) gem install jasmine"
  end
end

# Some basic config
source_dir = "vendor/assets/stylesheets"
build_dir = "vendor/assets/stylesheets/compiled"

desc "Watch sass and build documentation stylesheets continously"
task :watch do
  raise "Can't find source directory: #{source_dir}" unless File.directory?(source_dir)
  raise "Can't find build directory: #{build_dir}" unless File.directory?(build_dir)
  puts "Starting to watch #{source_dir} with sass"
  system "sass --watch #{source_dir}:#{build_dir}"
end

desc "Build documentation stylesheets"
task :build do
  raise "Can't find source directory: #{source_dir}" unless File.directory?(source_dir)
  raise "Can't find build directory: #{build_dir}" unless File.directory?(build_dir)
  system "sass --update #{source_dir}:#{build_dir}"
end
